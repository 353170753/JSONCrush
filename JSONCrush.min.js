JSONCrushSwap=((r,l=1)=>{h=((e,r)=>e.replace(new RegExp((r[2]?r[2]:"")+r[0]+"|"+((r[3]?r[3]:"")+r[1]),"g"),e=>e===r[0]?r[1]:r[0]));let n=[['"',"'"],["':","!"],[",'","~"],["}",")","\\","\\"],["{","(","\\","\\"]];if(l)for(let e=0;e<n.length;++e)r=h(r,n[e]);else for(e=n.length;e--;)r=h(r,n[e]);return r})
JSONCrush=((e,r=1)=>{let l,n,t,i,f,o,h,s,a=[];for(n=127;--n;)(65<=n&&90>=n||97<=n&&122>=n||48<=n&&57>=n||"-_.!~*'()".includes(String.fromCharCode(n)))&&a.push(String.fromCharCode(n));let d=e;r&&(d=JSON.stringify(e));let u=(d=JSONCrushSwap(d)).length/2,O=l="";for(encodeURI(d).replace(/%../g,"i");;l=t+l){let e=f=i=t=0;for(n=a.length;!t&&--n;)!~d.indexOf(a[n])&&(t=a[n]);if(!t)break;if(O){let e={};for(h in O){let r=d.indexOf(h);for(e[h]=0;~r;e[h]++)r=d.indexOf(h,r+h.length)}O=e}else for(O=p={},o=1;u;o++)for(u=n=0;++n<d.length-o;)if(!p[h=d.substr(g=n,o)]&&~(g=d.indexOf(h,g+o)))for(u=o,p[h]=1;~g;p[h]++)g=d.indexOf(h,g+o);for(let r in O)g=encodeURI(r).replace(/%../g,"i").length,(g=(s=O[r])*g-g-(s+1)*encodeURI(t).replace(/%../g,"i").length)&&(g>e||g==e&&s>f)&&(e=g,f=s,i=r),1>g&&delete O[r];p={};for(let e in O)p[e.split(i).join(t)]=1;if(O=p,!i)break;d=d.split(i).join(t)+t+i}return(d=d.replace(/\u0001/g,""))+"\u0001"+l})
JSONUncrush=((r,l=1)=>{let n=r.split("\u0001"),t=n[0];n=n[1];for(let e in n)t=(t=t.split(n[e])).join(t.pop());return e=JSONCrushSwap(t,0),l&&(e=JSON.parse(e)),e});