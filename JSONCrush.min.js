JSONCrush=(r,e=1)=>{let n,i,o,f,t,a,l,g,d=[];for(i=127;--i;)(65<=i&&90>=i||97<=i&&122>=i||48<=i&&57>=i||"-_.!~*'()".includes(String.fromCharCode(i)))&&d.push(String.fromCharCode(i));let c=r;e&&(c=JSON.stringify(r));let v=(c=JSONCrushSwap(c)).length/2,h=n="";for(encodeURI(c).replace(/%../g,"i");;n=o+n){let p=t=f=o=0;for(i=d.length;!o&&--i;)!~c.indexOf(d[i])&&(o=d[i]);if(!o)break;if(h){let u={};for(l in h){let s=c.indexOf(l);for(u[l]=0;~s;u[l]++)s=c.indexOf(l,s+l.length)}h=u}else for(h=u={},a=1;v;a++)for(v=i=0;++i<c.length-a;)if(!u[l=c.substr(s=i,a)]&&~(s=c.indexOf(l,s+a)))for(v=a,u[l]=1;~s;u[l]++)s=c.indexOf(l,s+a);for(let C in h)s=encodeURI(C).replace(/%../g,"i").length,(s=(g=h[C])*s-s-(g+1)*encodeURI(o).replace(/%../g,"i").length)&&(s>p||s==p&&g>t)&&(p=s,t=g,f=C),1>s&&delete h[C];for(let O in u={},h)u[O.split(f).join(o)]=1;if(h=u,!f)break;c=c.split(f).join(o)+o+f}for(v=128,i=0;i<c.length;++i)(h=c.charCodeAt(i))>v&&(v=h);return++v,(o=String.fromCharCode(v))+c+o+n}
JSONUncrush=(r,e=1)=>{let n=r.split(r[0]),i=n[1];for(let o in n=n[2])i=(i=i.split(n[o])).join(i.pop());return o=JSONCrushSwap(i,0),e&&(o=JSON.parse(o)),o}
JSONCrushSwap=(c,e=1)=>{f=(g,a)=>(g.replace(new RegExp((a[2]?a[2]:"")+a[0]+"|"+((a[3]?a[3]:"")+a[1]),"g"),h=>h===a[0]?a[1]:a[0]));let d=[['"',"'"],[",","~"],["':","!"],[",'","_"],["}",")","\\","\\"],["{","(","\\","\\"]];if(e)for(let b=0;b<d.length;++b)c=f(c,d[b]);else for(b=d.length;b--;)c=f(c,d[b]);return c};